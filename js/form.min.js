var processForm=function(b,e,a,c){if(!checkform(b)){return false}var d=b.serialize();processAjax(b,d,e,a,c)};var processAjax=function(d,c,e,a,b){a=(a===undefined)?"php/form.php":a;jQuery.ajax({url:a,type:"POST",async:true,data:c,beforeSend:function(){loadingDiv(d)},complete:function(){removeLoading(d)},success:function(f){e=(e===undefined)?false:e;validsubmitform(d,f,e,b)}})};var validsubmitform=function(c,f,g,a){var i=jQuery.parseJSON(f);g=(g===undefined)?false:g;a=(a===undefined)?2000:a;var d=false;if(i.status===true){d=(i.msg===undefined)?"<p id='success'>DONE!</p>":"<p id='success'>"+i.msg+"</p>"}else{if(i.status!==undefined){d=(i.msg===undefined)?"<p id='warning'>Oops, something has gone wrong!</p>":"<p id='warning'>"+i.msg+"</p>"}}if(d!==false){var b=c.width();var h=c.height();c.append("<div class='feedbackForm'></div>");var e=$(".feedbackForm");e.css({width:b+"px",height:h+"px"}).html(d).fadeIn(200);setTimeout(function(){e.fadeOut(200).remove();if(g!==false){g(i)}},a)}else{if(g!==false){g(i)}}};var checkform=function(d){var e=true;d.find(".inputFeedback").hide();var f="* Required";d.find("input,select,textarea").not('input[type="submit"]').each(function(){$(this).removeClass("wrongField");var g=true;if($(this).is(":visible")&&$(this).prop("required")&&$.trim($(this).val()).length===0){g=false}if($(this).hasClass("tinymce")&&tinyMCE.get($(this).attr("id")).getContent().length===0){tinymce.execCommand("mceFocus",false,"consent");g=false}if($(this).attr("maxlength")&&$(this).val().length>$(this).attr("maxlength")){g=false;f="Exceeds Maximum length ("+$(this).attr("maxlength")+")"}if($(this).attr("minlength")&&$(this).val().length>$(this).attr("minlength")){g=false;f="Too short! (minimum: "+$(this).attr("minlength")+")"}if($(this).attr("type")=="email"&&!checkemail($(this).val())){f="Invalid email";g=false}if(!g){$(this).addClass("wrongField");$(this).after("<div class='inputFeedback' style='display: none;'>*</div>");$(this).next(".inputFeedback").animate({width:"toggle"})}e=(!g)?g:e});var c=d.find("input[name=conf_password]");if(c.length){var b=d.find("input[name=password]").val();if(b!=c.val()){c.addClass("wrongField");f="Passwords must match";e=false}}if(!e){var a=d.find('input[type="submit"]');d.find(".feedbackSubmit").remove();a.before("<div class='feedbackSubmit' style='display: none;'>"+f+"</div>");d.find(".feedbackSubmit").animate({width:"toggle"},350)}d.find("input.wrongField:first").focus();return e};var checkemail=function(a){var b=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return b.test(a)};var showfeedback=function(c,a){var b=(typeof a==="undefined")?".feedback":".feedback#"+a;$(b).html(c).fadeIn(1000).delay(3000).fadeOut(1000);return false};function modArray(c,d,b){var a;for(a=0;a<c.length;++a){if(c[a].name==d){c[a].value=b;break}}return c}$(document).ready(function(){$("body").on("click",".processform",function(c){c.preventDefault();var a=$(this);var b=a.length>0?$(a[0].form):$();processForm(b)})});
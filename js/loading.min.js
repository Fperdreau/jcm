var tinymcesetup=function(){tinymce.init({mode:"textareas",selector:".tinymce",width:"100%",height:300,plugins:["advlist autolink lists charmap print preview hr spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen","save contextmenu directionality template paste textcolor"],content_css:"js/tinymce/skins/lightgray/content.min.css",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | l      ink image | print preview media fullpage | forecolor backcolor emoticons",style_formats:[{title:"Bold text",inline:"b"},{title:"Red text",inline:"span",styles:{color:"#ff0000"}},{title:"Red header",block:"h1",styles:{color:"#ff0000"}},{title:"Example 1",inline:"span",classes:"example1"},{title:"Example 2",inline:"span",classes:"example2"},{title:"AppTable styles"},{title:"AppTable row 1",selector:"tr",classes:"tablerow1"}]})};var loadCalendar=function(){jQuery.ajax({url:"php/form.php",type:"POST",async:true,data:{get_calendar_param:true},success:function(c){var a=jQuery.parseJSON(c);var b=$('input[type="date"]').val();inititdatepicker(a,b)}})};function getPage(b,a){if(b===undefined){var c=getParams();b=(c.page===undefined)?"home":c.page}a=(a===undefined)?parseurl():a;a=(a===false||a==="")?false:a;jQuery.ajax({url:"php/form.php",data:{getPage:b},type:"POST",async:true,success:function(g){var f=jQuery.parseJSON(g);var e={page:f.pageName};var d=(a===false)?"index.php?page="+b:"index.php?page="+b+"&"+a;history.pushState(e,f.pageName,d);if(f.AppStatus==="Off"&&b!=="admin"){$("#pagecontent").html("<div id='content'><div style='vertical-align: middle; margin-top: 20%; text-align: center;'><div style='font-size: 1.6em; font-weight: 600; margin-bottom: 20px;'>Sorry</div><div> the website is currently under maintenance.</div></div></div>").fadeIn(200)}else{if(f.pageName===null){$("#pagecontent").html("<div id='nopage'>If you were looking for the answer to the question:<p style='font-size: 1.4em; text-align: center;'>What is the universe?</p> I can tell you it is 42. <p>But since you were looking for a page that does not exist, then I can tell you:</p><p style='font-size: 2em; text-align: center;'>ERROR 404</p></div>").fadeIn(200)}else{if(f.status){displayPage(b,f.pageName,a,f.plugins)}else{$("#pagecontent").html(f.msg).fadeIn(200);$(".leanModal#user_login").leanModal({top:50,overlay:0.6,closeButton:".modal_close"}).click()}}}}})}var displayPage=function(f,e,g,a){var c={page:e};var b=(g===false)?"index.php?page="+f:"index.php?page="+f+"&"+g;var d=$("#pagecontent");jQuery.ajax({url:"pages/"+e+".php",type:"GET",async:true,data:g,beforeSend:function(){loadingDiv(d)},complete:function(){removeLoading(d)},success:function(i){var h=jQuery.parseJSON(i);history.pushState(c,e,b);d.hide().html(h);$("section").each(function(){$(this).fadeIn(200)});showPlugins(f,a);tinymcesetup();loadCalendar()}})};var parseurl=function(){var a=window.location.search.substring(1);var b=a.split("&");b=b.slice(1,b.length);b=b.join("&");return b};getParams=function(){var c=window.location.href;var f=c.split("?");if(f.length===1){return{}}var a=decodeURIComponent(f[1]).split("&");var e={};for(var d=0;d<a.length;d++){var b=a[d].split("=");e[b[0]]=b[1]}return e};function loadingDiv(a){a.css("position","relative").append("<div class='loadingDiv' style='width: 100%; height: 100%;'></div>").show()}function removeLoading(a){a.fadeIn(200);a.find(".loadingDiv").fadeOut(1000).remove()}function adapt(){var i=$("#float_menu");var e=$(".topnav");var f=$(".sideMenu");f.hide();i.hide();$(".submenu").hide();var a=$("#sitetitle").outerWidth()+e.outerWidth()+$("#login_box").outerWidth()+10;if($(window).width()<=a){i.show();e.hide()}else{i.hide();e.css("display","inline-block").show()}var j=$(window).height();var b=$(window).width();$("#core").css("min-height",j+"px");var g=$(".modalContainer");var d=g.outerWidth();var h=(d<b)?d/2:0;var c=(d<b)?50:0;g.css({"margin-left":-h+"px",left:c+"%"})}$(document).ready(function(){$(window).resize(function(){adapt()});$("body").ready(function(){getPage();adapt()})});
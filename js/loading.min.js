var tinymcesetup=function(){tinymce.init({mode:"textareas",selector:".tinymce",width:"100%",height:300,plugins:["advlist autolink lists charmap print preview hr spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen","save contextmenu directionality template paste textcolor"],content_css:"js/tinymce/skins/lightgray/content.min.css",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | l      ink image | print preview media fullpage | forecolor backcolor emoticons",style_formats:[{title:"Bold text",inline:"b"},{title:"Red text",inline:"span",styles:{color:"#ff0000"}},{title:"Red header",block:"h1",styles:{color:"#ff0000"}},{title:"Example 1",inline:"span",classes:"example1"},{title:"Example 2",inline:"span",classes:"example2"},{title:"AppTable styles"},{title:"AppTable row 1",selector:"tr",classes:"tablerow1"}]})};var loadCalendarSessions=function(){$("#ui-datepicker-div").remove();jQuery.ajax({url:"php/form.php",type:"POST",async:true,data:{get_calendar_param:true},success:function(b){var a=jQuery.parseJSON(b);inititdatepicker(a)}})};var loadCalendarSubmission=function(){$("#ui-datepicker-div").remove();jQuery.ajax({url:"php/form.php",type:"POST",async:true,data:{get_calendar_param:true},success:function(b){var a=jQuery.parseJSON(b);init_submission_calendar(a)}})};var loadCalendarAvailability=function(){var a=$("#availability_calendar");if(a.length>0&&a!==undefined){a.css({position:"relative","min-height":"200px"});jQuery.ajax({url:"php/form.php",type:"POST",async:true,data:{get_calendar_param:true},beforeSend:function(){loadingDiv(a)},complete:function(){removeLoading(a)},success:function(b){if(a.hasClass("hasDatepicker")){a.datepicker("destroy")}initAvailabilityCalendar(jQuery.parseJSON(b))}})}};function getPage(c,b){var d=getParams();if(c===undefined){c=(d.page===undefined)?"home":d.page}b=(b===undefined)?parseurl():b;b=(b===false||b==="")?false:b;var a=$("main");d.getPage=c;jQuery.ajax({url:"php/form.php",data:d,type:"POST",async:true,beforeSend:function(){loadingDiv(a)},complete:function(){removeLoading(a)},success:function(h){var g=jQuery.parseJSON(h);var f={page:g.pageName};var e=(b===false)?"index.php?page="+c:"index.php?page="+c+"&"+b;history.pushState(f,g.pageName,e);displayPage(c,g)}})}var displayPage=function(c,b){var a=b.plugins;pageTransition(b);showPlugins(c,a);tinymcesetup();loadCalendarSessions();loadCalendarAvailability()};function pageTransition(b){var a=$("#hidden_container");var d=a.find("#current_content");if(a.find("#next_content").length==0){a.append('<div id="next_content"></div>');renderSection(d,b);return true}var c=a.find("#next_content");renderSection(c,b);d.animate({"margin-left":"-100%",opacity:0},1000,function(){var e=$(this).siblings("#next_content");e.attr("id","current_content");e.after('<div id="next_content"></div>');$(this).remove()})}function renderSection(b,a){var c='<div class="wrapper"><div id="section_title"></div><div id="section_content"></div></div>';b.html(c);b.find("#section_content").html(a.content);b.find("#section_title").html(a.header)}var parseurl=function(){var a=window.location.search.substring(1);var b=a.split("&");b=b.slice(1,b.length);b=b.join("&");return b};getParams=function(){var c=window.location.href;var f=c.split("?");if(f.length===1){return{}}var a=decodeURIComponent(f[1]).split("&");var e={};for(var d=0;d<a.length;d++){var b=a[d].split("=");e[b[0]]=b[1]}return e};function loadingDiv(a){a.css("position","relative").append("<div class='loadingDiv' style='width: 100%; height: 100%;'></div>").show()}function removeLoading(a){a.fadeIn(200);a.find(".loadingDiv").fadeOut(1000).remove()}function adapt(){var i=$("#float_menu");var e=$(".topnav");var f=$(".sideMenu");f.hide();i.hide();$(".submenu").hide();var a=$("#sitetitle").outerWidth()+e.outerWidth()+$("#login_box").outerWidth()+10;if($(window).width()<=a){i.show();e.hide()}else{i.hide();e.css("display","inline-block").show()}var j=$(window).height();var b=$(window).width();$("#core").css("min-height",j+"px");var g=$(".modalContainer");var d=g.outerWidth();var h=(d<b)?d/2:0;var c=(d<b)?50:0;g.css({"margin-left":-h+"px",left:c+"%"})}$(document).ready(function(){$(window).resize(function(){adapt()});$("body").ready(function(){getPage();adapt()})});
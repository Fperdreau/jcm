function getPlugins(t,n){jQuery.ajax({url:"php/form.php",type:"POST",data:{get_plugins:!0,page:t},async:!0,success:function(a){var e=jQuery.parseJSON(a);n(t,e)}})}function showPlugins(t,n){var a,e=t.split("/");for(a in n)if(n.hasOwnProperty(a)){var o=n[a];o.page===e[e.length-1]&&$(".plugins").fadeOut(200).append("<section>"+o.display+"</section>").fadeIn(200)}}function install(t){var n=$(this).attr("data-name"),a=$(this).attr("data-controller"),e=$(this).attr("data-action"),o=$(this).closest(".plugDiv");jQuery.ajax({url:"php/router.php?controller="+a+"&action="+e,type:"POST",data:{name:n},async:!0,beforeSend:function(){"install"===e?$(t).removeClass("installBtn"):$(t).removeClass("uninstallBtn"),$(t).addClass("loadBtn")},success:function(n){validsubmitform(o,n,function(n){if(n.status===!0){var a="install"===e?"uninstallBtn":"installBtn",o="install"===e?"uninstall":"install";$(t).attr("data-op",o).removeClass("loadBtn").addClass(a)}})}})}function execute(t,n){var a=t.data("name"),e=t.data("controller"),o=t.data("action"),s=t.closest(".plugDiv"),i=o+"Btn",l=o===n[0]?n[1]:n[0],r=l+"Btn";jQuery.ajax({url:"php/router.php?controller="+e+"&action="+o,type:"POST",data:{name:a},async:!0,beforeSend:function(){$(t).removeClass(i),$(t).addClass("loadBtn")},success:function(n){validsubmitform(s,jQuery.parseJSON(n),function(n){n.status===!0?$(t).attr("data-action",o).removeClass("loadBtn").addClass(r):$(t).removeClass("loadBtn")})}})}function showLogs(t){var n=t.attr("id"),a=$(".plugLog#"+n);a.is(":visible")?a.toggle():jQuery.ajax({type:"post",url:"php/form.php",data:{showLog:n},success:function(t){var a=jQuery.parseJSON(t);$(".plugLog#"+n).html(a).toggle()}})}function deleteLogs(t){var n=t.attr("id"),a=t.closest(".plugDiv");jQuery.ajax({type:"post",url:"php/form.php",data:{deleteLog:n},async:!0,success:function(t){validsubmitform(a,t)}})}function runTask(t){var n=t.attr("data-cron"),a=t.closest(".plugDiv");jQuery.ajax({url:"php/router.php?controller=Tasks&action=execute&name="+n,type:"POST",data:{name:n},async:!0,beforeSend:function(){$(t).toggleClass("runBtn loadBtn")},complete:function(){$(t).toggleClass("loadBtn runBtn")},success:function(t){validsubmitform(a,t)}})}function stopTask(t){var n=t.attr("data-cron"),a=t.closest(".plugDiv");jQuery.ajax({url:"php/router.php?controller=Tasks&action=stop&name="+n,type:"POST",data:{name:n},async:!0,beforeSend:function(){$(t).toggleClass("runBtn loadBtn")},complete:function(){$(t).toggleClass("loadBtn runBtn")},success:function(t){a.find(".task_running_icon").toggleClass("running not_running"),validsubmitform(a,t)}})}$(document).ready(function(){$("<style>").prop("type","text/styles").html("            .valid_input {                background: rgba(0, 200, 0, .5);            }            .wrong_input {                background: rgba(200, 0, 0, .5);            }").appendTo("head"),$(document).on("input",".modSettings",function(t){t.preventDefault();var n=$(this),a=$(this).data("option"),e=$(this).data("name"),o=$(this).data("op"),s=$(this).val();jQuery.ajax({url:"php/form.php",type:"POST",data:{modSettings:e,option:a,op:o,value:s},async:!0,success:function(t){var a=jQuery.parseJSON(t);a===!0||a!==!1?("cron"==o&&$("#cron_time_"+e).html(a),n.addClass("valid_input"),setTimeout(function(){n.removeClass("valid_input")},500)):(n.addClass("wrong_input"),setTimeout(function(){n.removeClass("wrong_input")},500))}})}).on("click",".modCron",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=$(this).length>0?$($(this)[0].form):$();processForm(n,function(t){t.status&&$("#cron_time_"+n.find('input[name="name"]').val()).html(t.msg).fadeIn(200)})}).on("click",".installDep",function(t){t.preventDefault(),execute($(this),["install","uninstall"])}).on("click",".activateDep",function(t){t.preventDefault(),execute($(this),["activate","deactivate"])}).on("click",".showLog",function(t){t.preventDefault(),showLogs($(this))}).on("click",".deleteLog",function(t){t.preventDefault(),deleteLogs($(this))}).on("click",".run_cron",function(t){t.preventDefault(),runTask($(this))}).on("click",".stop_cron",function(t){t.preventDefault(),stopTask($(this))})});